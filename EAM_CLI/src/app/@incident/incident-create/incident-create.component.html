<nz-page-header nzBackIcon>
  <nz-page-header-title>TẠO MỚI SỰ CỐ</nz-page-header-title>
  <nz-page-header-subtitle>Đề nghị sửa chữa sự cố</nz-page-header-subtitle>
  <nz-page-header-extra>
    <div class="flex-grow-2 flex">

      <button class="!flex !items-center space-btn" nzType="primary" nz-button (click)="onCreate()">
        <span nz-icon nzType="plus-circle"></span> Lưu dữ liệu
      </button>
    </div>
  </nz-page-header-extra>
  <nz-page-header-content class="main-content">
    <div nz-row [nzGutter]="16">
      <div nz-col class="gutter-row" [nzSpan]="14">
        <div class="inner-box">
          <nz-divider nzOrientation="left" nzText="THÔNG TIN TẠO MỚI"></nz-divider>

          <div nz-row [nzGutter]="16">

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Khu vực chức năng</label>
                <nz-select nzShowSearch nzAllowClear placeholder="Khu vực chức năng" [(ngModel)]="model.tplnr" (ngModelChange)="OnChangeEquip($event)">
                  <nz-option *ngFor="let item of lstFloc" [nzLabel]="item.tplnr + ' - ' + item.descript"
                    [nzValue]="item.tplnr">
                  </nz-option>
                </nz-select>
              </div>
            </div>

             <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Nhóm thiết bị</label>
                <nz-select nzShowSearch nzAllowClear placeholder="Nhóm thiết bị" [(ngModel)]="model.eqart" (ngModelChange)="OnChangeEquip($event)">
                  <nz-option *ngFor="let item of lstEqGroup" [nzLabel]="item.eqart + ' - ' + item.eqartTxt"
                    [nzValue]="item.eqart">
                  </nz-option>
                </nz-select>
              </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Thiết bị</label>
                <nz-select nzShowSearch nzAllowClear placeholder="Thiết bị" [(ngModel)]="model.equnr" (ngModelChange)="changeEquip($event)">
                  <nz-option *ngFor="let item of lstEquipSelect" [nzLabel]="item.equnr + ' - ' + item.eqktx"
                    [nzValue]="item.equnr">
                  </nz-option>
                </nz-select>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Bộ phận thực hiện</label>
                <nz-select nzShowSearch nzAllowClear [(ngModel)]="model.arbpl">
                  <nz-option *ngFor="let item of lstWc" [nzLabel]="item.arbpl + ' - ' + item.arbplTxt" [nzValue]="item.arbpl">
                  </nz-option>
                </nz-select>
              </div>
            </div>


             <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Bộ phận tiếp nhận</label>
                <nz-select nzShowSearch nzAllowClear [(ngModel)]="model.ingrp">
                  <nz-option *ngFor="let item of lstPlgrp" [nzLabel]="item.ingrp + ' - ' + item.ingrpTxt" [nzValue]="item.ingrp">
                  </nz-option>
                </nz-select>
              </div>
            </div>



            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Loại thông báo</label>
                <nz-select nzShowSearch nzAllowClear [(ngModel)]="model.qmart">
                  <nz-option *ngFor="let item of lstNotiTp" [nzLabel]="item.code + ' - ' + item.name"
                    [nzValue]="item.code">
                  </nz-option>
                </nz-select>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Mô tả sự cố (40 kí tự)</label>
                <textarea rows="2" nz-input [(ngModel)]="model.qmtxt"></textarea>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Chi tiết sự cố</label>
                <textarea rows="2" nz-input [(ngModel)]="model.qmdetail"></textarea>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Người thông báo sự cố</label>
                <app-input-clear [(value)]="model.qmnam" [(ngModel)]="model.qmnam" [disabled]="true"></app-input-clear>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Mức độ ưu tiên</label>
                <nz-select nzShowSearch nzAllowClear [(ngModel)]="model.priok">
                  <nz-option *ngFor="let item of lstPriorityLevel" [nzLabel]="item.value + ' - ' + item.name"
                    [nzValue]="item.value">
                  </nz-option>
                </nz-select>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Ngày thông báo sự cố</label>
                <nz-date-picker [nzFormat]="'dd/MM/yyyy hh:mm'" [(ngModel)]="model.qmdat"
                  [disabled]="true"></nz-date-picker>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Người sửa chữa</label>
                <nz-select nzShowSearch nzAllowClear [(ngModel)]="model.staffSc">
                  <nz-option *ngFor="let item of lstUser" [nzLabel]="item.userName + ' - ' + item.fullName" [nzValue]="item.userName">
                  </nz-option>
                </nz-select>
              </div>
            </div>



            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Ngày yêu cầu hoàn thành</label>
                <nz-date-picker [nzFormat]="'dd/MM/yyyy hh:mm'" [(ngModel)]="model.ltrmn"></nz-date-picker>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Đơn vị bảo trì</label>
                <nz-select nzShowSearch nzAllowClear placeholder="Đơn vị bảo trì" [(ngModel)]="model.iwerk">
                  <nz-option *ngFor="let item of lstPlant" [nzLabel]="item.iwerk + ' - ' + item.iwerkTxt"
                    [nzValue]="item.iwerk">
                  </nz-option>
                </nz-select>
              </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label>Thời gian bắt đầu dừng máy</label>
                <nz-date-picker [nzFormat]="'dd/MM/yyyy'" [nzPlaceHolder]="'Chọn ngày'"
                  [nzShowTime]="true"></nz-date-picker>
              </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="12">
              <div class="inner-box">
                <label nz-checkbox>Break down</label>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div nz-col class="gutter-row" [nzSpan]="10">
        <div class="inner-box">
          <nz-divider nzOrientation="left" nzText="FILE ĐÍNH KÈM"></nz-divider>
          <nz-upload nzType="drag" [nzMultiple]="true" nzAction="" [nzBeforeUpload]="beforeUpload"
            (nzChange)="handleChange($event)" [nzFileList]="fileList">
            <p class="ant-upload-drag-icon">
              <nz-icon nzType="inbox" />
            </p>
            <p class="ant-upload-text">Ấn hoặc kéo thả để upload file đính kèm</p>
            <p class="ant-upload-hint">
              Hỗ trợ tải lên các file XLSX, DOC, PDF, JPG, PNG,...
            </p>
          </nz-upload>

        </div>
      </div>
    </div>
  </nz-page-header-content>
</nz-page-header>
